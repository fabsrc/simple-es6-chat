<!DOCTYPE html>

<html>
<head>
  <title>main.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>main.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-comment">/* global Backbone, io */</span></pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <h2 id="es6-chat-application">ES6 Chat Application</h2>

            </div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p><strong>Simple Chat written with ES6</strong>
<em>Uses Backbone for structuring and socket.io and REST for communication</em></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
import Router from <span class="hljs-string">'./router'</span>;
import ChatRooms from <span class="hljs-string">'./collections'</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>Main Application class, creates router and starts Backbone history</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">class</span> Application {
  constructor() {
    <span class="hljs-keyword">new</span> Router();
    Backbone.history.start();
  }
}</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>Connection to socket.io and global ChatRooms collection are created
socket.io listener for userlist updates is created, if triggered, the
ChatRooms collection will be refetched
Before starting the application, the ChatRooms collection is fetched once</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>$(() =&gt; {
  <span class="hljs-string">'use strict'</span>;

  <span class="hljs-built_in">window</span>.socket = io();
  <span class="hljs-built_in">window</span>.chatRooms = <span class="hljs-keyword">new</span> ChatRooms();

  <span class="hljs-built_in">window</span>.socket.on(<span class="hljs-string">'updateUserList'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-built_in">window</span>.chatRooms.fetch();
  });

  <span class="hljs-built_in">window</span>.chatRooms.fetch().done(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">new</span> Application();
  });
});</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
