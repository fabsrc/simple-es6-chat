System.register(["./views","./models","./collections"],function(e){"use strict";var o,t,i,n,s;return{setters:[function(e){o=e.HomeView,t=e.ChatRoomView},function(e){i=e["default"]},function(e){n=e["default"]}],execute:function(){s=function(e){var s=function c(){this.routes={"":"home",":id":"chatroom"},$traceurRuntime.superConstructor(c).call(this)};return $traceurRuntime.createClass(s,{home:function(){var e=this,t=new n;t.fetch().success(function(){e.leaveRoom(),e.loadView(new o({collection:t}))})},chatroom:function(e){var o=this,n=new i({id:e});n.fetch().success(function(){window.socket.removeListener("message"),window.socket.removeListener("updateUserList"),o.leaveRoom(),o.joinRoom(e),o.loadView(new t({model:n}))}).error(function(){o.navigate("/",{trigger:!0})})},loadView:function(e){this.view&&(this.view.close?this.view.close():this.view.remove()),this.view=e,$("#app").html(this.view.$el)},joinRoom:function(e){window.socket.emit("joinRoom",e)},leaveRoom:function(){window.socket.emit("leaveRoom")}},{},e)}(Backbone.Router),e("default",s)}}});