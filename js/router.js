System.register(["./views","./models"],function(e){"use strict";var t,o,i,n;return{setters:[function(e){t=e.HomeView,o=e.ChatRoomView},function(e){i=e["default"]}],execute:function(){n=function(e){var n=function s(){this.routes={"":"home",":id":"chatroom"},app.socket=io(),$traceurRuntime.superConstructor(s).call(this)};return $traceurRuntime.createClass(n,{home:function(){console.log("Route#home"),this.loadView(new t)},chatroom:function(e){console.log("Route#chatroom",e);var t=this,n=new i({id:e});n.fetch().done(function(){app.socket.removeListener("message"),app.socket.emit("joinRoom",e),t.loadView(new o(e))}).error(function(){t.navigate("/")})},loadView:function(e){app.socket.emit("leaveRoom"),this.view&&(this.view.close?this.view.close():this.view.remove()),this.view=e,$("#app").html(this.view.$el)}},{},e)}(Backbone.Router),e("default",n)}}});