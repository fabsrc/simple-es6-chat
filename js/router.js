System.register(["./views","./models","./collections"],function(e){"use strict";var t,o,i,n,s;return{setters:[function(e){t=e.HomeView,o=e.ChatRoomView},function(e){i=e["default"]},function(e){n=e["default"]}],execute:function(){s=function(e){var s=function c(){this.routes={"":"home",":id":"chatroom"},$traceurRuntime.superConstructor(c).call(this)};return $traceurRuntime.createClass(s,{home:function(){var e=this,o=new n;o.fetch().success(function(){window.socket.emit("leaveRoom"),e.loadView(new t({collection:o}))})},chatroom:function(e){var t=this,n=new i({id:e});n.fetch().success(function(){window.socket.removeListener("message"),window.socket.removeListener("updateUserList"),window.socket.emit("leaveRoom"),window.socket.emit("joinRoom",e),t.loadView(new o({model:n}))}).error(function(){t.navigate("/",{trigger:!0})})},loadView:function(e){this.view&&(this.view.close?this.view.close():this.view.remove()),this.view=e,$("#app").html(this.view.$el)}},{},e)}(Backbone.Router),e("default",s)}}});