System.register(["./views"],function(e){"use strict";var o,t,i;return{setters:[function(e){o=e.HomeView,t=e.ChatRoomView}],execute:function(){i=function(e){var i=function n(){this.routes={"":"home",":id":"chatroom"},$traceurRuntime.superConstructor(n).call(this)};return $traceurRuntime.createClass(i,{home:function(){this.loadView(new o({collection:window.chatRooms}))},chatroom:function(e){var o=window.chatRooms.find({id:+e});o?(window.socket.removeListener("message"),this.loadView(new t({model:o})),this.joinRoom(e)):this.navigate("/",{trigger:!0})},loadView:function(e){this.leaveRoom(),this.view&&(this.view.close?this.view.close():this.view.remove()),this.view=e,$("#app").html(this.view.$el)},joinRoom:function(e){window.socket.emit("joinRoom",e)},leaveRoom:function(){window.socket.emit("leaveRoom")}},{},e)}(Backbone.Router),e("default",i)}}});