System.register(["./models"],function(e){"use strict";var t,s,n,i;return{setters:[function(e){t=e["default"]}],execute:function(){s=function(e){var t=function s(){$traceurRuntime.superConstructor(s).apply(this,arguments)};return $traceurRuntime.createClass(t,{initialize:function(){var e=this;this.template=$('script[name="home"]').html(),this.events={"click #newChatRoomButton":"newChatRoom"},window.socket.on("updateUserList",function(){e.collection.fetch()}),this.collection.on("all",this.render,this),this.render()},render:function(){return this.$el.html(_.template(this.template)({chatRooms:this.collection.models})),this.delegateEvents(),this},newChatRoom:function(){this.collection.create({},{wait:!0})}},{},e)}(Backbone.View),n=function(e){var t=function s(){$traceurRuntime.superConstructor(s).apply(this,arguments)};return $traceurRuntime.createClass(t,{initialize:function(){var e=this;this.template=$('script[name="chatroom"]').html(),this.events={"submit #sendMessageForm":"sendMessage"},window.socket.on("message",function(e,t){$("#messages").append($("<li>").html("<strong>"+e+"</strong>  "+t)),$("#messages").scrollTop($("#messages")[0].scrollHeight)}),this.render(),this.userListView=new i({model:this.model,el:$("#userlist",e.$el)})},sendMessage:function(){return window.socket.emit("message",$("#sendMessageInput").val()),$("#sendMessageInput").val(""),!1},render:function(){return this.$el.html(_.template(this.template)({chatRoom:this.model})),this}},{},e)}(Backbone.View),i=function(e){var t=function s(){$traceurRuntime.superConstructor(s).apply(this,arguments)};return $traceurRuntime.createClass(t,{initialize:function(){var e=this;this.template=$('script[name="userlist"]').html(),this.$el=$(this.el),this.render(),window.socket.on("updateUserList",function(){e.model.fetch()}),this.model.on("change",this.render,this)},render:function(){return this.$el.html(_.template(this.template)({users:this.model.get("users")})),this}},{},e)}(Backbone.View),e("HomeView",s),e("ChatRoomView",n)}}});