System.register(["./collections","./models"],function(e){"use strict";var t,n,s,i,o;return{setters:[function(e){t=e["default"]},function(e){n=e["default"]}],execute:function(){s=function(e){var s=function i(){$traceurRuntime.superConstructor(i).apply(this,arguments)};return $traceurRuntime.createClass(s,{initialize:function(){this.template=$('script[name="home"]').html(),this.getChatRooms(),this.events={"click #newChatRoomButton":"newChatRoom"}},render:function(){return console.log("render"),this.$el.html(_.template(this.template)({chatRooms:this.collection.models})),this.delegateEvents(),this},getChatRooms:function(){var e=this;this.collection=new t,this.collection.fetch().done(function(){e.render()})},newChatRoom:function(){var e=this,t=new n;t.save().done(function(){e.getChatRooms()})}},{},e)}(Backbone.View),i=function(e){var t=function s(){$traceurRuntime.superConstructor(s).apply(this,arguments)};return $traceurRuntime.createClass(t,{initialize:function(e){this.template=$('script[name="chatroom"]').html(),this.id=e,this.getChatRoom(),this.events={"submit #sendMessageForm":"sendMessage"},app.socket.on("message",function(e,t){$("#messages").append($("<li>").text(e+": "+t))})},getChatRoom:function(){var e=this;this.model=new n({id:this.id}),this.model.fetch().done(function(){e.render()})},sendMessage:function(){return app.socket.emit("message",$("#sendMessageInput").val()),$("#sendMessageInput").val(""),!1},render:function(){return this.$el.html(_.template(this.template)({chatRoom:this.model})),this.userListView=new o({model:this.model}),this}},{},e)}(Backbone.View),o=function(e){var t=function n(){$traceurRuntime.superConstructor(n).apply(this,arguments)};return $traceurRuntime.createClass(t,{initialize:function(){console.log(this);var e=this;this.template=$('script[name="userlist"]').html(),app.socket.on("userJoined",function(){console.log("userJoined"),e.render()})},render:function(){console.log(this);var e=this;this.model.fetch().done(function(){return e.$el.html(_.template(e.template)({users:e.model.get("users")})),$("#userlist").html(e.$el),this})}},{},e)}(Backbone.View),e("HomeView",s),e("ChatRoomView",i)}}});